<?xml version='1.0' encoding='UTF-8' ?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml"
	xmlns:h="http://java.sun.com/jsf/html"
	xmlns:f="http://java.sun.com/jsf/core">
<h:head>
	<title>#{msgs.accountPageTitle}</title>
</h:head>
<h:body>
        #{msgs.accountPageHeader} #{userbean.user.getfIO()}
        <h:form>
		<h:inputHidden value="#{userbean.loginStatus}" />
		<h:panelGrid columns="2">
			<h:commandButton id="changeUserData"
				value="#{msgs.accountUserDataChengeAction}" action="userData" />
			<h:message for="changeUserData" />
		</h:panelGrid>
		<h:commandButton id="logout" value="#{msgs.accountViewContacts}"
			action="contacts" />
		<br />
		<h:commandButton id="contacts" value="#{msgs.loginLogout}"
			action="#{userbean.logout}" />
		<br />
		<h:commandButton id="writeLetter" value="#{msgs.letterWriteButton}"
			action="writeLetter" />
		<br />#{msgs.localeHeader}
            <h:selectOneMenu value="#{localeBean.localeCode}"
			onchange="submit()"
			valueChangeListener="#{localeBean.localeListener}">
			<f:selectItems value="#{localeBean.locales}" />
		</h:selectOneMenu>
	</h:form>
	<h:form>
	<h:dataTable value="#{income.incomeList}" var="o">
		<h:column>
            <f:facet name="header">
                <h:outputText value="#{msgs.select}" />
            </f:facet>
            <h:selectBooleanCheckbox value="#{income.selectedIds[o.id]}" />
        </h:column>
		<h:column>
			<f:facet name="header">#{msgs.Sender}</f:facet>
    				#{o.letter.id}
    			</h:column>
		<h:column>
			<f:facet name="header">#{msgs.Title}</f:facet>
    				#{o.letter.theme}
    			</h:column>
		<h:column>
			<f:facet name="header">#{msgs.Content}</f:facet>
    				#{o.letter.content}
    			</h:column>
            <h:column>
                <h:commandButton value="#{msgs.letterOpen}" action="#{letterBean.showLetter( o.letter.id ) }" />
            </h:column>
	</h:dataTable>
        <h:commandButton value="#{msgs.toTrash}" action="#{income.toTrash}" />
	</h:form>
	
</h:body>
</html>

